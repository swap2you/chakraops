# Release R22.3 — Wheel page purpose + operator copy

**Date:** 2026-02  
**Goal:** PO-driven Wheel visibility and labeling; clear Admin/Recovery explanation; no raw codes in UI.

---

## Scope

- **In scope:** Config/feature flag for Wheel page (Option 1: Admin/Recovery label; Option 2: behind Advanced toggle; Option 3: hidden). Explanation panel: what Wheel is, when to use Repair, risks. No raw reason/blocked_by codes in Wheel UI; map to safe labels. Primary spine remains Dashboard → Symbol → Plan → Monitor.
- **Out of scope:** Changes to wheel state engine or backend API.

---

## Config (PO choice)

Set at build time via **`VITE_WHEEL_PAGE_MODE`** (default: `admin`):

| Value | Behavior |
|-------|----------|
| **admin** (default) | Wheel in nav as "Wheel (Admin)"; page shows Admin/Recovery panel. Recommended. |
| **advanced** | Wheel link only when user checks "Show advanced" in sidebar; toggle persisted in localStorage. |
| **hidden** | No Wheel in nav; `/wheel` redirects to `/`. |

---

## API changes

None.

---

## UI changes

- **Sidebar:** Wheel link visibility and label per `VITE_WHEEL_PAGE_MODE`. When `advanced`, "Show advanced" checkbox at bottom of nav toggles Wheel link.
- **App routing:** When mode is `hidden`, route `/wheel` redirects to `/`.
- **Wheel page:** "Admin / Recovery" card (what Wheel is, when to use Repair, do not use in normal flow). `blocked_by` and reason codes shown as safe labels (e.g. "One position per symbol (already open)", "DTE below minimum"); "Wheel policy" → "Blocked by wheel policy".

---

## Data / persistence

- **advanced** mode: `localStorage` key `chakraops_show_advanced` (`"true"` / `"false"`) for Show advanced toggle. No backend persistence.

---

## Tests

- **Frontend:** `WheelPage.test.tsx` — Admin/Recovery panel, friendly blocked_by labels (no raw codes). `Sidebar.test.tsx` — R22.3 admin label, hidden mode (no Wheel link), advanced mode (toggle and conditional Wheel link).

---

## Verification

- **UAT evidence path:** `out/verification/R22.3/notes.md`.

---

## File list (summary)

- `frontend/src/config/features.ts` — `getWheelPageMode()`, `isWheelLinkVisible()`, Show advanced get/set.
- `frontend/src/layout/Sidebar.tsx` — Wheel link filter and "Wheel (Admin)" label; Advanced toggle when mode `advanced`.
- `frontend/src/app/App.tsx` — Conditional `/wheel` route vs redirect when mode `hidden`.
- `frontend/src/pages/WheelPage.tsx` — Admin/Recovery panel; `wheelBlockedByLabel()` for safe blocked_by/reason text.
- `frontend/src/layout/Sidebar.test.tsx` — R22.3 visibility tests per mode.
- `frontend/src/pages/WheelPage.test.tsx` — R22.3 panel and friendly labels.
- `out/verification/R22.3/notes.md` — verification notes.
